"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react");function e(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var u,c=t[Symbol.iterator]();!(r=(u=c.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(t,e)||r(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||r(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e){if(t){if("string"==typeof t)return o(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var i=function(t,e){for(var n=t.target;n;){var r;if(null===(r=n)||void 0===r?void 0:r.classList.contains(e))return!0;n=n.parentElement}return!1},u=function(t){return document.documentElement.clientWidth<=t.clientX||document.documentElement.clientHeight<=t.clientY},c=function(t){return!(!t.includes("touch")||!function(){if("undefined"==typeof window||"function"!=typeof window.addEventListener)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}}),n=function(){return null};return window.addEventListener("test",n,e),window.removeEventListener("test",n,e),t}())&&{passive:!0}};exports.DEFAULT_IGNORE_CLASS="ignore-onclickoutside",exports.default=function(r){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=o.refs,f=o.disabled,l=void 0!==f&&f,s=o.eventTypes,d=void 0===s?["mousedown","touchstart"]:s,v=o.excludeScrollbar,y=void 0!==v&&v,m=o.ignoreClass,p=void 0===m?"ignore-onclickoutside":m,b=t.useRef(r),h=t.useState([]),g=e(h,2),E=g[0],w=g[1];t.useEffect((function(){b.current=r}),[r]);var S=t.useCallback((function(t){w((function(e){return[].concat(n(e),[{current:t}])}))}),[]);return t.useEffect((function(){if((null==a?void 0:a.length)||E.length){var t=function(t){if(!i(t,p)){var e=[];(a||E).forEach((function(t){var n=t.current;n&&e.push(n)})),y&&u(t)||e.length&&e.every((function(e){return!e.contains(t.target)}))&&b.current(t)}},e=function(){d.forEach((function(e){document.removeEventListener(e,t,c(e))}))};if(!l)return d.forEach((function(e){document.addEventListener(e,t,c(e))})),function(){e()};e()}}),[E,p,y,l,JSON.stringify(d)]),S};
